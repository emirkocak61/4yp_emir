<?xml version="1.0"?>
<launch>

    <arg name="unitree_gripper" default="true"/>
    <arg name="unitree_realsense" default="true"/>
    <arg name="unitree_ns" default="z1_gazebo"/>

    <arg name="blind" default="false"/>
    <arg name="rviz" default="true"/>

    <param name="robot_description" command="$(find xacro)/xacro $(find anymal_coyote_drs)/urdf/modules/unitree_z1/robot_standalone.xacro arm_root:=unitree_mount arm_ns:=$(arg unitree_ns) unitree_gripper:=$(arg unitree_gripper) unitree_realsense:=$(arg unitree_realsense)"/>

    <node name="joint_states_relay" pkg="topic_tools" type="relay" args="z1_gazebo/joint_states joint_states" />

    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find anytree_hardware)/resources/unitree.rviz" if="$(arg rviz)"/>

    <!--Connect world and exotica/world_frame-->
    <node pkg="tf2_ros" type="static_transform_publisher" name="exotica_world_frame_broadcaster" args="0.0 0.0 0.0 0.0 0.0 0.0 world exotica/world_frame"/>

    <!-- Place needle_valve relative to apriltag -->
    <group unless="$(arg blind)">
        <node pkg="tf2_ros" type="static_transform_publisher" name="needle_valve_base_broadcaster" args="0.003 -0.147 0.025 0.0 0.0 0.0 tag_3 needle_valve/0/base"/>
    </group>

    <group if="$(arg blind)">
        <node pkg="tf2_ros" type="static_transform_publisher" name="needle_valve_base_broadcaster" args="0.6 0.0 0.52 -1.5708 0.0 1.5708 world needle_valve/0/base"/>
    </group>

    <node pkg="tf2_ros" type="static_transform_publisher" name="needle_valve_handle_broadcaster" args="0.0 0.0 0.071 0.0 0.0 0.0 needle_valve/0/base needle_valve/0/handle"/>

    <!-- <node pkg="tf2_ros" type="static_transform_publisher" name="needle_valve_handle_broadcaster" args="0.3 0.3 0.1 0.0 0.0 0.0 needle_valve/0/base needle_valve/0/handle"/> -->

</launch>
